# Before and After Comparison

## Legacy Format (weapons.ini) - REMOVED ❌

```ini
; Generated by Munitions Auto Patcher
; GeneratedAt=2025-10-09 23:45:51

[Settings]
; (Reserved for future use)

[Leveled List Integration]
; Weapon sections follow.

[Weapon.WPNRECCELGHETTOBLASTER]
name = NOVESKE 'GHETTO BLASTER' RECCE
leveled_lists = LLI_Raider_Weapons@StandardBallistic_Medium:0.4, LLI_Faction_Gunner_Weapons@StandardBallistic_Medium:0.6, LLI_Faction_SuperMutant_Weapons@StandardBallistic_Medium:0.7
```

**Issues with legacy format:**
- Mixed ammo and weapon data in single file
- SuperMutants included
- Weight values (0.4, 0.6) not inverted
- Less structured format

---

## New Format - IMPLEMENTED ✅

### robco_ammo_patch.ini (Always Generated)

```ini
; Generated by Munitions Auto Patcher
; GeneratedAt=2025-10-09 21:44:34

; Ammo Classification Data

[Ammo.FE008005]
category = Shotgun_Standard
power = 2

[Ammo.FE008030]
category = StandardBallistic_Low
power = 1
```

**Features:**
- Dedicated file for ammo classification
- Clear section naming (`[Ammo.{FormID}]`)
- Structured category and power fields
- Always generated when ammo_classification exists

---

### robco_ll_patch.ini (Conditionally Generated)

```ini
; Generated by Munitions Auto Patcher
; GeneratedAt=2025-10-09 21:44:34

; Leveled List Integration
; SuperMutants are excluded
; Spawn chances use inverted logic: invertedChance = 100 - weight

[Weapon.WPNRECCELGHETTOBLASTER]
name = NOVESKE 'GHETTO BLASTER' RECCE
leveled_lists = LLI_Raider_Weapons@StandardBallistic_Medium:60, LLI_Faction_Gunner_Weapons@StandardBallistic_Medium:40
```

**Features:**
- Dedicated file for leveled list integration
- SuperMutants excluded (was in legacy, now removed)
- Inverted chance logic: weight 0.4 (40%) → 60, weight 0.6 (60%) → 40
- Only generated when weapon_ammo_map.json exists
- Clear documentation in comments

---

## Key Improvements

1. **Separation of Concerns**
   - Ammo data in robco_ammo_patch.ini
   - Weapon leveled lists in robco_ll_patch.ini

2. **SuperMutants Exclusion**
   - Old: `LLI_Faction_SuperMutant_Weapons@StandardBallistic_Medium:0.7`
   - New: Completely removed

3. **Inverted Chance Logic**
   - Old: weight values directly (0.4, 0.6, 0.7)
   - New: inverted percentages (60, 40, excluded)

4. **Conditional Generation**
   - robco_ammo_patch.ini: Always generated
   - robco_ll_patch.ini: Only when weapon data exists

5. **Better Documentation**
   - Clear comments explaining logic
   - Structured field names
   - Explicit exclusion notes

6. **Backward Compatibility**
   - ammo_map.json preferred, ammo_map.ini fallback
   - No schema changes to strategy.json
   - No changes to PAS scripts
